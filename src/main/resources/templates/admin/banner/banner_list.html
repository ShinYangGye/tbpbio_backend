<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/comm :: comm-head}">
  </head>
  <body>
	 <nav th:replace="~{fragments/comm :: navbar}"></nav>
	 <div class="container my-2">
	    <h4>배너관리</h4>
	    
		<!-- 이벤트 등록  ------------------------------------>
		<div class="mb-4">
			<form th:object="${item}" th:action method="POST" enctype="multipart/form-data" onSubmit="return goSave();">			
				  <div class="row mb-3">
				    <label for="bannerName" class="col-sm-2 col-form-label">배너 이름</label>
				    <div class="col-sm-10">
				      <input type="text" maxlength=100 class="form-control" th:field="*{bannerName}">
				    </div>		
				  </div>		  
				  <div class="row mb-3">
				    <label for="productId" class="col-sm-2 col-form-label">제품 관리번호</label>
				    <div class="col-sm-10">
				      <input type="number" maxlength=100 class="form-control" th:field="*{productId}">
				    </div>
				  </div>		  
		
				  <fieldset class="row mb-3">
				    <label for="attachFile" class="col-sm-2 col-form-label">배너 이미지</label>
				    <div class="col-sm-10">
						<input class="form-control" type="file" accept="image/*" th:field="*{attachFile}" >
				    </div>
				  </fieldset>	
				  
				  <div class="row mb-3" style="display: none;">
				    <label for="type" class="col-sm-2 col-form-label">배너 유형</label>
				    <div class="col-sm-10">
						<select class="form-select" aria-label="Default select example"  th:field="*{type}">
						  <option value="product">제품배너</option>
						  <option value="event">이벤트배너</option>
						</select>				      
				    </div>
				  </div>  
				  	
				<div class="d-grid gap-2 d-md-flex justify-content-md-end">
				  <button class="btn btn-secondary me-md-2" type="submit">배너 등록</button>
				  <button class="btn btn-secondary" type="reset">등록 취소</button>
				</div>		
			</form>		
		</div>	    
		<!-- // 이벤트 등록 ----------------------------------->
		
		<hr />

		<!-- 브랜드 목록 ----------------------------------->
		<div class="card mb-0 mb-1">
			<div class="row g-0 text-center">
				<div class="col-md-2" ></div>
				<div class="col-md-8">배너명/제품명</div>
				<div class="col-md-2"></div>
			</div>
		</div>
		<div class="card mb-1"  th:each="item, itemStat : ${items}">
		  <div class="row g-0">
			    <div class="col-md-2"  th:if="${item.file}">
			    
			    	<img class="img-fluid rounded-start" th:src="@{|/admin/banner/image/${item.file.savedFileName}|}">
			    
			    </div>
			    <div class="col-md-8">
			      <div class="card-body">
			        <h5 class="card-title" th:text="${item.bannerName}">Brand</h5>
			        <p class="card-text" th:text="${item.productName}">Product</p>
			      </div>
			    </div>
			    <div class="col-md-1 d-flex align-items-center">
			    	
			    </div>
			    <div class="col-md-1 d-flex align-items-center">
			    	<button class="btn btn-outline-secondary" th:onclick="goDelete([[${item.id}]]);">삭제</button>
			    </div>    	
			  </div>
		</div>
		<!-- // 브랜드 목록 ----------------------------------->	
	</div>
	
    <script th:replace="~{fragments/comm :: bottom-script}"></script>
    
    <script th:inline="javascript">
      
    	// 저장
    	let goSave = function() {
			
			let bannerName = document.getElementById('bannerName').value;
			let productId = document.getElementById('productId').value;
			let attachFile = document.getElementById('attachFile').value;
			
			if (bannerName.trim() == '') {
				alert("배너이름을 입력하세요.");
				document.getElementById('bannerName').focus();
				return false;
			}
			
			if (productId.trim() == '') {
				alert("제품관리번호를 입력하세요.");
				document.getElementById('productId').focus();
				return false;
			}
			
			if (attachFile.trim() == '') {
				alert("배너 이미지를 선택하세요.");
				document.getElementById('attachFile').focus();
				return false;
			} 
			return true;
    		
    	}
 
     
    
    	// 삭제
    	let goDelete = function(id) { 		

    		let conf = confirm("해당 배너를 삭제합니까?");  		
    		if (conf) {
    			location.href = "/admin/banner/"+ id +"/delete";
    		} 		  		
    	}
    </script>    
  
  </body>
</html>